/* Mobile Responsiveness Improvements */

/* ============================
   GLOBAL MOBILE UTILITIES
   ============================ */

/* Prevent unwanted horizontal overflow on mobile - but allow scrollable containers */
html, body {
  max-width: 100vw;
}

/* Only hide overflow on the main layout container, not on nested scrollable elements */
body > #root {
  overflow-x: hidden;
}

/* Smooth scrolling for mobile */
@media (max-width: 768px) {
  * {
    -webkit-overflow-scrolling: touch;
  }
}

/* ============================
   TABLE RESPONSIVENESS
   ============================ */

/* Make tables horizontally scrollable on mobile */
.table-responsive-wrapper {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
}

.table-responsive-wrapper::-webkit-scrollbar {
  height: 6px;
}

.table-responsive-wrapper::-webkit-scrollbar-track {
  background: hsl(var(--muted) / 0.3);
  border-radius: 3px;
}

.table-responsive-wrapper::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.3);
  border-radius: 3px;
}

/* ============================
   CARD LAYOUTS
   ============================ */

/* Cards stack on mobile, grid on larger screens */
@media (max-width: 640px) {
  .card-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .card-grid > * {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* ============================
   NAVIGATION IMPROVEMENTS
   ============================ */

/* Mobile-friendly navigation */
@media (max-width: 768px) {
  .nav-mobile {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 50;
    background: hsl(var(--background));
    border-top: 1px solid hsl(var(--border));
    padding: 0.5rem;
  }
}

/* ============================
   FORM ELEMENTS
   ============================ */

/* Full-width inputs on mobile */
@media (max-width: 640px) {
  .mobile-full-width {
    width: 100% !important;
  }
  
  .mobile-full-width input,
  .mobile-full-width select,
  .mobile-full-width button {
    width: 100%;
  }
}

/* ============================
   DIALOGS & MODALS
   ============================ */

/* Full-screen dialogs on mobile */
@media (max-width: 640px) {
  [role="dialog"] {
    width: 100vw !important;
    max-width: 100vw !important;
    height: auto;
    max-height: 90vh;
    margin: 0;
    border-radius: 1rem 1rem 0 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
  }
}

/* ============================
   SPACING ADJUSTMENTS
   ============================ */

@media (max-width: 640px) {
  .mobile-p-2 {
    padding: 0.5rem !important;
  }
  
  .mobile-p-4 {
    padding: 1rem !important;
  }
  
  .mobile-gap-2 {
    gap: 0.5rem !important;
  }
  
  .mobile-gap-4 {
    gap: 1rem !important;
  }
  
  .mobile-text-sm {
    font-size: 0.875rem !important;
  }
  
  .mobile-text-xs {
    font-size: 0.75rem !important;
  }
}

/* ============================
   FLEX LAYOUTS
   ============================ */

@media (max-width: 640px) {
  .mobile-flex-col {
    flex-direction: column !important;
  }
  
  .mobile-flex-wrap {
    flex-wrap: wrap !important;
  }
  
  .mobile-items-start {
    align-items: flex-start !important;
  }
}

/* ============================
   GRID LAYOUTS
   ============================ */

@media (max-width: 640px) {
  .mobile-grid-1 {
    grid-template-columns: 1fr !important;
  }
}

@media (min-width: 640px) and (max-width: 768px) {
  .tablet-grid-2 {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

/* ============================
   BUTTON GROUPS
   ============================ */

@media (max-width: 640px) {
  .button-group-mobile {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .button-group-mobile > * {
    flex: 1 1 auto;
    min-width: 0;
  }
}

/* ============================
   HIDE/SHOW UTILITIES
   ============================ */

@media (max-width: 640px) {
  .hide-mobile {
    display: none !important;
  }
}

@media (min-width: 641px) {
  .show-mobile-only {
    display: none !important;
  }
}

@media (max-width: 768px) {
  .hide-tablet {
    display: none !important;
  }
}

@media (min-width: 769px) {
  .show-tablet-only {
    display: none !important;
  }
}

/* ============================
   SCROLL CONTAINERS
   ============================ */

.horizontal-scroll-container {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.horizontal-scroll-container::-webkit-scrollbar {
  display: none;
}

.horizontal-scroll-container > * {
  scroll-snap-align: start;
  flex-shrink: 0;
}

/* ============================
   TOUCH IMPROVEMENTS
   ============================ */

@media (pointer: coarse) {
  /* Larger touch targets for buttons */
  button, 
  [role="button"],
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Larger spacing between interactive elements */
  .touch-spacing > * + * {
    margin-top: 0.75rem;
  }
}

/* ============================
   SAFE AREA INSETS (for notched devices)
   ============================ */

@supports (padding: env(safe-area-inset-bottom)) {
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
}

/* ============================
   ASPECT RATIO BOXES
   ============================ */

.aspect-mobile-hero {
  aspect-ratio: 4/3;
}

@media (min-width: 768px) {
  .aspect-mobile-hero {
    aspect-ratio: 16/9;
  }
}

/* ============================
   LANDING PAGE SPECIFIC
   ============================ */

@media (max-width: 640px) {
  .landing-hero-text {
    text-align: center;
    padding: 0 1rem;
  }
  
  .landing-cta-buttons {
    flex-direction: column;
    width: 100%;
  }
  
  .landing-cta-buttons button {
    width: 100%;
  }
}

/* ============================
   DASHBOARD SPECIFIC
   ============================ */

@media (max-width: 768px) {
  .dashboard-metrics-grid {
    grid-template-columns: 1fr !important;
    gap: 0.75rem !important;
  }
  
  .dashboard-card {
    padding: 0.75rem !important;
  }
  
  .dashboard-header {
    flex-direction: column !important;
    gap: 0.5rem !important;
  }
}

/* ============================
   WEEKLY OVERVIEW SPECIFIC
   ============================ */

@media (max-width: 768px) {
  .weekly-controls {
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .weekly-controls > * {
    flex: 1 1 auto;
  }
  
  .weekly-table-container {
    margin: 0 -1rem;
    padding: 0 1rem;
  }
}

/* ============================
   PRINT STYLES (hide mobile-only elements when printing)
   ============================ */

@media print {
  .hide-print,
  .show-mobile-only {
    display: none !important;
  }
}
